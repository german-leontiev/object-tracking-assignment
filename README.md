# Object Tracking Home assignment

### Установка зависимостей
```
pip install -r requirements.txt
```

### Запуск сервера
Или настройте запуск файла fastapi_server.py как приведено на скриншоте ниже 
![fastapi.png](info/fastapi.png)

или командой в терминале
```
python3 -m uvicorn fastapi_server:app --reload --port 8001 
```

### Постановка задачи

Реализуйте методы tracker_soft и tracker_strong в скрипте fastapi_server.py,
придумайте, обоснуйте и реализуйте метод для оценки качества разработанных трекеров.
Сравните результаты tracker_soft и tracker_strong для 5, 10, 20 объектов и различных 
значений random_range и bb_skip_percent
(информацию о генерации данных читай в пункте "Тестирование"). Напишите отчёт. 
В отчете необходимо в свободном стиле привести описание методов tracker_soft, 
tracker_strong, метода оценки качества трекеров, привести сравнительную таблицу 
реализованных трекеров, сделать вывод.  
Бонусом можете выписать найденные баги в текущем проекте.

### Тестирование
Для тестирования можно воспользоваться скриптом create_track.py. Скрипт генерирует
информацию об объектах и их треках. Скопируйте вывод в новый скрипт track_n.py и
скорректируйте импорт в fastapi_server.py
```
from track_n import track_data, country_balls_amount
```
Что стоит менять в скрипте create_track.py:  
**tracks_amount**: количество объектов  
**random_range**: на сколько пикселей рамка объектов может ложно смещаться (эмуляция не идеальной детекции)  
**bb_skip_percent**: с какой вероятностью объект на фрейме может быть не найдет детектором  

### Julia Accuracy (Юлия)
Метрика названа в честь создателя -- Юлии.
Метрика учитывает главное требование трекинга -- следить за объектом, абстрагируять от всего остального.
Рассчитывается как среднее число смены id для одного и того же объекта на всём протяжении трекинга
1 -- идеальный трекинг, 10 -- в среднем у одного объекта меняется id 10 раз

### Soft Trakcer (Герман)
Анализирует предыдущий кадр, присваимая объектам на текущем кадре id тех элементов,
чьи bbox-ы менее всего отличаются.

### Strong Track (Дмитрий)
Развил идею Soft Tracker-а, предложив анализировать не последний, а три последних кадра, что в некторых случаях улучшает качество трекинга в 6 раз, особенно при большом числе объектов

### Результаты экспериментов.
Выли протестированны различные параметры генерации треков.
Для удобства, функции из `creare_track.py` были вынесены в ноутбук с экспериментами, где и происходила генерация, трекинг и подсчёт метрик в цикле.
За подробностями см. `research.ipynb`


| tracks_amount | random_range | bb_skip_percent | soft_acc | strong_acc |
| :---: | :---: | :---: | :---: | :---: |
| 5.0 | 5.0 | 0.15 | 6.4 | 1.8 |
| 5.0 | 5.0 | 0.25 | 5.2 | 1.8 |
| 5.0 | 5.0 | 0.35 | 7.4 | 1.8 |
| 5.0 | 10.0 | 0.15 | 11.2 | 1.8 |
| 5.0 | 10.0 | 0.25 | 5.4 | 1.8 |
| 5.0 | 10.0 | 0.35 | 4.0 | 1.8 |
| 5.0 | 20.0 | 0.15 | 11.2 | 1.8 |
| 5.0 | 20.0 | 0.25 | 4.4 | 1.8 |
| 5.0 | 20.0 | 0.35 | 4.6 | 1.8 |
| 10.0 | 5.0 | 0.15 | 8.5 | 1.9 |
| 10.0 | 5.0 | 0.25 | 7.3 | 1.9 |
| 10.0 | 5.0 | 0.35 | 6.2 | 1.9 |
| 10.0 | 10.0 | 0.15 | 10.2 | 1.9 |
| 10.0 | 10.0 | 0.25 | 6.6 | 1.9 |
| 10.0 | 10.0 | 0.35 | 7.2 | 1.9 |
| 10.0 | 20.0 | 0.15 | 5.9 | 1.9 |
| 10.0 | 20.0 | 0.25 | 7.0 | 1.9 |
| 10.0 | 20.0 | 0.35 | 5.9 | 1.9 |
| 20.0 | 5.0 | 0.15 | 8.25 | 1.95 |
| 20.0 | 5.0 | 0.25 | 11.65 | 1.95 |
| 20.0 | 5.0 | 0.35 | 8.2 | 1.95 |
| 20.0 | 10.0 | 0.15 | 10.25 | 1.95 |
| 20.0 | 10.0 | 0.25 | 9.75 | 1.95 |
| 20.0 | 10.0 | 0.35 | 10.65 | 1.95 |
| 20.0 | 20.0 | 0.15 | 8.65 | 1.95 |
| 20.0 | 20.0 | 0.25 | 10.95 | 1.95 |
| 20.0 | 20.0 | 0.35 | 13.75 | 1.95 |